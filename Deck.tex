\documentclass[17pt]{beamer}
\usepackage[utf8]{inputenc}
\usepackage[T1]{fontenc}
\usepackage{listings}
\usepackage{themes/dbt}
\usepackage{textpos}
\usepackage{xcolor,pgf}
\lstset{language=csh, numbers=left, frame=single, breaklines=true, breakatwhitespace=false, basicstyle=\smaller, numberstyle=\small, basicstyle=\sffamily}

%\usetheme{Warsaw}
\title{Istio - introduction}
\institute{\includegraphics[width=4cm]{images/title_logo.png}}
\author{Wies≈Çaw Kielas}
\date{\today}

\defbeamertemplate*{title page}{customized}[1][]
{
  \usebeamercolor[fg]{title}
  \usebeamerfont{title}\inserttitle\par
  \bigskip
  \bigskip
  \usebeamerfont{institute}\insertinstitute\par
  \bigskip
  \bigskip
  \usebeamercolor[fg]{item}
  \usebeamerfont{author}\insertauthor\par
  \usebeamerfont{date}February 8, 2019\par
  \bigskip
  \texttt{wieslaw@globalapptesting.com}
}

\newcommand{\imageframe}[2]{{
  \usebackgroundtemplate{\includegraphics[width=\paperwidth,height=\paperheight]
  {#1}}
  \begin{frame}{
    \vspace{-6pt}\usebeamercolor[fg]{item}
    \pgfsetfillopacity{0.8}
    \begin{snugshade}
    \centering #2
    \end{snugshade}
  }
  \end{frame}
}}

\begin{document}
  \begin{frame}
    \maketitle
  \end{frame}

  \logo{\vspace{-6pt}\includegraphics[width=1.0cm]{images/logo.png}}

  \imageframe{images/istio.png}{What's Istio?}

  \begin{frame}{Service mesh - what's that?}
  \begin{itemize}
    \item<1-> Just another layer
    \item<2-> Cloud Native application model
    \begin{itemize}
      \item One app = 100 services
      \item One app = 1000 instances
    \end{itemize}
    \item<2-> Multiple purposes
    \begin{itemize}
      \item Service discovery
      \item Load balancing
      \item Monitoring
    \end{itemize}
    \item<3-> ...Kubernetes does that?
  \end{itemize}
  \end{frame}

  \imageframe{images/intersection.jpg}{Advanced routing rules}

  \begin{frame}{Advanced routing rules}
  \begin{itemize}
    \item<1-> Kubernetes: weight based
    \item<2-> Weighted split
    \begin{itemize}
      \item Arbitrary weights = canary deployments
      \item Fast application rollback
    \end{itemize}
    \item<3-> Routing by headers
    \item<4-> Retry after error
  \end{itemize}
  \end{frame}

  \imageframe{images/cb.png}{Circuit breakers}

  \begin{frame}{Circuit breakers}
  \begin{itemize}
    \item<1-> Kubernetes: misbehaves? kill it
    \item<2-> Based on live traffic, not checks
    \item<3-> Don't send traffic to pods
    \begin{itemize}
      \item Responding with errors
      \item Responding slowly
    \end{itemize}
  \end{itemize}
  \end{frame}

  \imageframe{images/monitoring.png}{Tracing and monitoring}

  \begin{frame}{Tracing and monitoring}
  \begin{itemize}
    \item<1-> Kubernetes: little request info
    \item<2-> Built in monitoring
    \begin{itemize}
      \item Very easily put all resquest/response information into Prometheus
    \end{itemize}
    \item<3-> OpenTracting support - Jaeger
    \begin{itemize}
      \item Open source NewRelic
      \item Keep things in Prometheus? Some teams <3 data
    \end{itemize}
  \end{itemize}
  \end{frame}

  \imageframe{images/chaos.jpg}{Chaos engineering\\...and mirroring}

  \begin{frame}{Chaos engineering and mirroring}
  \begin{itemize}
    \item<1-> Kubernetes: no and no
    \item<2-> Introducting faults to apps
    \begin{itemize}
      \item Random errors, ex. 5\% gets 503'd
      \item Random delays
    \end{itemize}
    \item<3-> Mirroring requests
    \begin{itemize}
      \item Sending traffic to another copy of the service
      \begin{itemize}
        \item Async
        \item Not seen by clients
      \end{itemize}
    \end{itemize}
  \end{itemize}
  \end{frame}

  % ---------------------------------- %

  \imageframe{images/questions.jpg}{Questions?}

  \begin{frame}
    \maketitle
  \end{frame}

\end{document}
